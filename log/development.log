Mysql2::Error: No database selected: SHOW TABLES LIKE 'schema_migrations'
Mysql2::Error: No database selected: SHOW TABLES LIKE 'schema_migrations'
Mysql2::Error: No database selected: SHOW TABLES LIKE 'schema_migrations'
  [1m[36m (459.2ms)[0m  [1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (304.1ms)[0m  CREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) 
  [1m[36mActiveRecord::SchemaMigration Load (16.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateUsers (20151119102034)
  [1m[35m (115.3ms)[0m  CREATE TABLE `users` (`id` int(11) auto_increment PRIMARY KEY, `email` varchar(255), `password_digest` varchar(255), `name` varchar(255), `token` varchar(1000), `provider` varchar(255), `uid` varchar(255), `expires_at` datetime, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (8.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151119102034')
  [1m[36m (38.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateAuthenticationTokens (20151119102532)
  [1m[35m (99.4ms)[0m  CREATE TABLE `authentication_tokens` (`id` int(11) auto_increment PRIMARY KEY, `user_id` int(11), `access_token` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (15.1ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151119102532')
  [1m[36m (39.9ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36m (21.5ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'authentication_tokens'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `authentication_tokens`
  [1m[36m (0.4ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'users'
[0m
  [1m[35m (0.2ms)[0m  SHOW CREATE TABLE `users`


Started POST "/" for 127.0.0.1 at 2015-11-23 03:21:36 +0700
  [1m[36mActiveRecord::SchemaMigration Load (23.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m

ActionController::RoutingError (No route matches [POST] "/"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.0ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (4.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (116.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (216.6ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (17.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (36.1ms)


Started POST "/api/v1/payments" for 127.0.0.1 at 2015-11-23 03:24:20 +0700

ActionController::RoutingError (No route matches [POST] "/api/v1/payments"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_route.html.erb (0.9ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.1ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.9ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (21.2ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.6ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (13.9ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (28.5ms)


Started POST "/api/v1/payments" for 127.0.0.1 at 2015-11-23 03:26:49 +0700

ActionController::RoutingError (No route matches [POST] "/api/v1/payments"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_route.html.erb (0.8ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (20.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (13.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (29.8ms)


Started POST "/api/v1/payments" for 127.0.0.1 at 2015-11-23 03:26:54 +0700

ActionController::RoutingError (No route matches [POST] "/api/v1/payments"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.2ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.7ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (20.7ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (14.1ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (28.5ms)
  [1m[36mActiveRecord::SchemaMigration Load (20.5ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreateCollections (20151120032414)
  [1m[35m (106.6ms)[0m  CREATE TABLE `collections` (`id` int(11) auto_increment PRIMARY KEY, `user_id` int(11), `type` varchar(255), `name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (12.1ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151120032414')
  [1m[36m (35.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateUserCollections (20151120033941)
  [1m[35m (99.6ms)[0m  CREATE TABLE `user_collections` (`id` int(11) auto_increment PRIMARY KEY, `user_id` int(11), `collection_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151120033941')
  [1m[36m (30.9ms)[0m  [1mCOMMIT[0m
Migrating to CreatePaymentMethods (20151123081828)
  [1m[35m (84.0ms)[0m  CREATE TABLE `payment_methods` (`id` int(11) auto_increment PRIMARY KEY, `name` varchar(255)) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151123081828')
  [1m[36m (30.7ms)[0m  [1mCOMMIT[0m
Migrating to CreatePayments (20151123081900)
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/asvenus/Project/bcc/bcc/db/migrate/20151123081900_create_payments.rb:14)
  [1m[35m (149.3ms)[0m  CREATE TABLE `payments` (`id` int(11) auto_increment PRIMARY KEY, `payment_method_id` int(11), `user_id` int(11), `customer_id` int(11), `customer_type` varchar(255), `expires_at` datetime, `purchased_at` datetime, `quantity` int(11), `status` varchar(255), `deleted_at` datetime, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151123081900')
  [1m[36m (23.2ms)[0m  [1mCOMMIT[0m
Migrating to AddColumnTransactionIdToPayments (20151124081442)
  [1m[35m (192.8ms)[0m  ALTER TABLE `payments` ADD `transaction_id` varchar(255)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151124081442')
  [1m[36m (30.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT `schema_migrations`.* FROM `schema_migrations`
  [1m[36m (0.8ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'authentication_tokens'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `authentication_tokens`
  [1m[36m (0.5ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'collections'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `collections`
  [1m[36m (0.5ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'payment_methods'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `payment_methods`
  [1m[36m (0.4ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'payments'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `payments`
  [1m[36m (0.4ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'user_collections'
[0m
  [1m[35m (0.3ms)[0m  SHOW CREATE TABLE `user_collections`
  [1m[36m (0.4ms)[0m  [1mSELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'users'
[0m
  [1m[35m (0.2ms)[0m  SHOW CREATE TABLE `users`


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:04:16 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (41.0ms)
Completed 500 Internal Server Error in 547ms (ActiveRecord: 1.8ms)

Sprockets::FileNotFound - couldn't find file 'turbolinks' with type 'application/javascript':
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:182:in `rescue in block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:179:in `block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:178:in `process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:83:in `_call'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:68:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/bundle.rb:23:in `block in call'
  sprockets (3.4.0) lib/sprockets/utils.rb:183:in `dfs'
  sprockets (3.4.0) lib/sprockets/bundle.rb:24:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/base.rb:66:in `find_asset'
  sprockets (3.4.0) lib/sprockets/environment.rb:30:in `find_asset'
  sprockets (3.4.0) lib/sprockets/base.rb:92:in `[]'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:230:in `lookup_asset_for_path'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:190:in `check_errors_for'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:137:in `block in javascript_include_tag'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:136:in `javascript_include_tag'
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___1254878070416300665_18130580'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:66:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/6fd2622769008a85/variables" for 127.0.0.1 at 2015-11-25 04:04:16 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:05:00 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.1ms)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 0.0ms)

Sprockets::FileNotFound - couldn't find file 'turbolinks' with type 'application/javascript':
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:182:in `rescue in block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:179:in `block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:178:in `process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:83:in `_call'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:68:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/bundle.rb:23:in `block in call'
  sprockets (3.4.0) lib/sprockets/utils.rb:183:in `dfs'
  sprockets (3.4.0) lib/sprockets/bundle.rb:24:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/base.rb:66:in `find_asset'
  sprockets (3.4.0) lib/sprockets/environment.rb:30:in `find_asset'
  sprockets (3.4.0) lib/sprockets/base.rb:92:in `[]'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:230:in `lookup_asset_for_path'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:190:in `check_errors_for'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:137:in `block in javascript_include_tag'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:136:in `javascript_include_tag'
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___1254878070416300665_18130580'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:66:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/80316c9e59619679/variables" for 127.0.0.1 at 2015-11-25 04:05:00 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:05:06 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.9ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms)

Sprockets::FileNotFound - couldn't find file 'turbolinks' with type 'application/javascript':
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:182:in `rescue in block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:179:in `block in process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:178:in `process_directives'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:83:in `_call'
  sprockets (3.4.0) lib/sprockets/directive_processor.rb:68:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/bundle.rb:23:in `block in call'
  sprockets (3.4.0) lib/sprockets/utils.rb:183:in `dfs'
  sprockets (3.4.0) lib/sprockets/bundle.rb:24:in `call'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:75:in `call_processor'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:57:in `block in call_processors'
  sprockets (3.4.0) lib/sprockets/processor_utils.rb:56:in `call_processors'
  sprockets (3.4.0) lib/sprockets/loader.rb:134:in `load_from_unloaded'
  sprockets (3.4.0) lib/sprockets/loader.rb:60:in `block in load'
  sprockets (3.4.0) lib/sprockets/loader.rb:318:in `fetch_asset_from_dependency_cache'
  sprockets (3.4.0) lib/sprockets/loader.rb:44:in `load'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:20:in `block in initialize'
  sprockets (3.4.0) lib/sprockets/cached_environment.rb:47:in `load'
  sprockets (3.4.0) lib/sprockets/base.rb:66:in `find_asset'
  sprockets (3.4.0) lib/sprockets/environment.rb:30:in `find_asset'
  sprockets (3.4.0) lib/sprockets/base.rb:92:in `[]'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:230:in `lookup_asset_for_path'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:190:in `check_errors_for'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:137:in `block in javascript_include_tag'
  sprockets-rails (2.3.3) lib/sprockets/rails/helper.rb:136:in `javascript_include_tag'
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___1254878070416300665_18130580'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:66:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/24b6b4ccae9113c4/variables" for 127.0.0.1 at 2015-11-25 04:05:06 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:05:18 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (7.6ms)
Completed 200 OK in 1419ms (Views: 1372.4ms | ActiveRecord: 2.1ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-11-25 04:05:20 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-11-25 04:05:20 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-11-25 04:05:20 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-11-25 04:05:20 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-11-25 04:05:20 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:07:05 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.5ms)
Completed 200 OK in 59ms (Views: 49.8ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:07:27 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.9ms)
Completed 200 OK in 38ms (Views: 34.7ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:08:28 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"6fEFNSKdu2wwM7pAq8Lb7zqCVJqQBZ5Kd6Ogkzph/Q0GMyPJRwvkgxBUB8P8UyA5/lFuYDhae/ZR/xBx6mSAnQ==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://dantri.com
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:18:28 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (3.1ms)
Completed 200 OK in 78ms (Views: 50.3ms | ActiveRecord: 1.9ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:18:31 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"QfeMg+Me59YR4hqZRCyd42NCH2Q/8WKm0aMoZz/9AreuNap/hoi4OTGFpxoTvWY1p5Elnpeuhxr3/5iF7/h/Jw==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/payments/xxx
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)


Started GET "/payments/xxx" for 127.0.0.1 at 2015-11-25 04:18:31 +0700
Processing by PaymentsController#show as HTML
  Parameters: {"id"=>"xxx"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)

ActionView::MissingTemplate - Missing template payments/show, application/show with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/home/asvenus/Project/bcc/bcc/app/views"
  * "/home/asvenus/.rvm/gems/ruby-2.1.0/gems/kaminari-0.16.3/app/views"
:
  actionview (4.2.1) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.1) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/d07b0111a03ee1a6/variables" for 127.0.0.1 at 2015-11-25 04:18:31 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:19:38 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.9ms)
Completed 200 OK in 65ms (Views: 40.4ms | ActiveRecord: 1.8ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:19:40 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"083OR626Mf+AP4nu88eGbRiQZnERkdR1jYZa//13kYY8D+i7yCxuEKBYNG2kVn273ENci7nOMcmr2uodLXLsFg==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:19:40 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (1.9ms)
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:20:11 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.9ms)
Completed 200 OK in 61ms (Views: 55.7ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:20:12 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ieS4NqmDAqTUd5PswSpFHSeHz75qeN9SvfJhWdNmvb9mJp7KzBVdS/QQLm+Wu77L41T1RMInOu6brtG7A2PALw==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:20:12 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (2.9ms)
Completed 200 OK in 44ms (Views: 38.9ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:27:13 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.7ms)
Completed 200 OK in 57ms (Views: 49.1ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:27:16 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"qCcmmaVlZ+4pl9o/DFudqvAI2I/BG/1GI6y5TzByjbZH5QBlwPM4AQnwZ7xbymZ8NNvidWlEGPoF8Amt4HfwJg==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:27:16 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (0.2ms)
Completed 200 OK in 38ms (Views: 33.8ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:27:27 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.9ms)
Completed 200 OK in 68ms (Views: 62.9ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:29:28 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (6.3ms)
Completed 200 OK in 64ms (Views: 58.9ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:29:32 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RdtUy/OZNJ9OFaZGrWQPFGFasRW6ZlQDpAdE6hex7ECqGXI3lg9rcG5yG8X69fTCpYmL7xI5sb+CW/QIx7SR0A==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:29:32 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (1.7ms)
Completed 200 OK in 34ms (Views: 30.7ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:33:58 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.8ms)
Completed 200 OK in 60ms (Views: 55.1ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:34:00 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jHqahLSDdxbzkqoJyuTZhyrMxfgpwD1mxjcrDbCXUv1juLx40RUo+dP1F4qddSJR7h//AoGf2Nrga5vvYJIvbQ==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:34:00 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (1.6ms)
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:36:02 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.0ms)
Completed 200 OK in 60ms (Views: 54.3ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:36:07 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Dlsb+VotpIZ9h4nIu79QQtW9vumI/T66GGOAZD0tBdnhmT0FP7v7aV3gNEvsLquUEW6EEyCi2wY+PzCG7Sh4SQ==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:36:07 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (2.3ms)
Completed 200 OK in 102ms (Views: 98.9ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-25 04:36:29 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.0ms)
Completed 200 OK in 69ms (Views: 58.5ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-25 04:36:30 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"tppfKyp931Eq1g2NUythJoq+nm7HEp1ekpfKzVOGa59ZWHnXT+uAvgqxsA4EuprwTm2klG9NeOK0y3ovg4MWDw==", "payment"=>{"customer_id"=>""}, "commit"=>"Pay"}
Redirected to http://localhost:3000/xxx
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)


Started GET "/xxx" for 127.0.0.1 at 2015-11-25 04:36:30 +0700
Processing by PaymentsController#xxx as HTML
  Rendered payments/xxx.html.haml within layouts/application (2.2ms)
Completed 200 OK in 38ms (Views: 32.9ms | ActiveRecord: 0.0ms)
  [1m[36mActiveRecord::SchemaMigration Load (149.7ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to AddAmountPayerIdCanceledTokenToPayment (20151126070744)
  [1m[35m (402.8ms)[0m  ALTER TABLE `payments` ADD `amount` int(11) DEFAULT 1
  [1m[36m (193.7ms)[0m  [1mALTER TABLE `payments` ADD `token` varchar(255)[0m
  [1m[35m (226.0ms)[0m  ALTER TABLE `payments` ADD `canceled` tinyint(1) DEFAULT 0
  [1m[36m (201.3ms)[0m  [1mALTER TABLE `payments` ADD `payer_id` varchar(255)[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20151126070744')[0m
  [1m[35m (32.3ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (22.9ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'authentication_tokens'

  [1m[36m (0.3ms)[0m  [1mSHOW CREATE TABLE `authentication_tokens`[0m
  [1m[35m (0.5ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'collections'

  [1m[36m (0.3ms)[0m  [1mSHOW CREATE TABLE `collections`[0m
  [1m[35m (0.5ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'payment_methods'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `payment_methods`[0m
  [1m[35m (0.4ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'payments'

  [1m[36m (0.3ms)[0m  [1mSHOW CREATE TABLE `payments`[0m
  [1m[35m (0.4ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'user_collections'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `user_collections`[0m
  [1m[35m (0.4ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'bcc_development'
  AND fk.table_name = 'users'

  [1m[36m (0.2ms)[0m  [1mSHOW CREATE TABLE `users`[0m
  [1m[36mPaymentMethod Load (0.5ms)[0m  [1mSELECT  `payment_methods`.* FROM `payment_methods`  ORDER BY `payment_methods`.`id` DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (12.8ms)[0m  [1mINSERT INTO `payment_methods` (`name`) VALUES ('Personal')[0m
  [1m[35m (35.9ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `payment_methods` (`name`) VALUES ('Company')
  [1m[36m (41.3ms)[0m  [1mCOMMIT[0m
  [1m[35mPaymentMethod Load (0.6ms)[0m  SELECT  `payment_methods`.* FROM `payment_methods`  ORDER BY `payment_methods`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (17.6ms)[0m  UPDATE `payment_methods` SET `name` = 'Paypal' WHERE `payment_methods`.`id` = 1
  [1m[36m (36.4ms)[0m  [1mCOMMIT[0m
  [1m[35mPaymentMethod Load (0.5ms)[0m  SELECT  `payment_methods`.* FROM `payment_methods`  ORDER BY `payment_methods`.`id` DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `payment_methods` SET `name` = '2checkout' WHERE `payment_methods`.`id` = 2
  [1m[36m (43.6ms)[0m  [1mCOMMIT[0m


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 00:39:21 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  [1m[35mAuthenticationToken Load (0.5ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1
  Rendered payments/new.html.haml within layouts/application (40.0ms)
Completed 500 Internal Server Error in 198ms (ActiveRecord: 3.4ms)

NoMethodError - undefined method `id' for false:FalseClass:
  app/views/payments/new.html.haml:31:in `block in _app_views_payments_new_html_haml__68885121873390674_51498280'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block (2 levels) in form_for_with_haml'
  haml (4.0.7) lib/haml/helpers.rb:278:in `with_tabs'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block in form_for_with_haml'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:52:in `capture_with_haml'
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:444:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml__68885121873390674_51498280'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/7e4de6ec40333889/variables" for 127.0.0.1 at 2015-11-28 00:39:22 +0700
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (23.8ms)[0m  SELECT  1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'chuyenvu90@gmail.com' AND `users`.`provider` IS NULL) LIMIT 1
  [1m[36mSQL (14.8ms)[0m  [1mINSERT INTO `users` (`email`, `password_digest`, `created_at`, `updated_at`) VALUES ('chuyenvu90@gmail.com', '$2a$10$a7c86OTvzzUOfmmptPPhHujZfU5i2QT0S/i2.zgLxyDYh3l1Fu4wi', '2015-11-27 17:41:19', '2015-11-27 17:41:19')[0m
  [1m[35mAuthenticationToken Load (0.4ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`user_id` = 1 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `authentication_tokens` (`user_id`, `access_token`, `created_at`, `updated_at`) VALUES (1, '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2', '2015-11-27 17:41:19', '2015-11-27 17:41:19')[0m
  [1m[35m (36.0ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35mAuthenticationToken Load (0.9ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`user_id` = 1 LIMIT 1


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:41:40 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.4ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.5ms)

ArgumentError - comparison of DateTime with nil failed:
  app/models/user.rb:37:in `token_expires?'
  app/models/user.rb:48:in `current_user'
  app/controllers/payments_controller.rb:5:in `new'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/5d9ab551a496dfee/variables" for 127.0.0.1 at 2015-11-28 00:41:40 +0700
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (22.5ms)[0m  SELECT  1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'chuyenvu90@gmail.com' AND `users`.`id` != 1 AND `users`.`provider` IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE `users` SET `expires_at` = '2016-05-27 17:42:19', `updated_at` = '2015-11-27 17:42:19' WHERE `users`.`id` = 1[0m
  [1m[35m (27.8ms)[0m  COMMIT


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:42:22 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered payments/new.html.haml within layouts/application (21.2ms)
Completed 200 OK in 534ms (Views: 522.3ms | ActiveRecord: 2.2ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-11-28 00:42:23 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-11-28 00:42:23 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-11-28 00:42:23 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-11-28 00:42:23 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-11-28 00:42:23 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:43:23 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered payments/new.html.haml within layouts/application (7.5ms)
Completed 200 OK in 42ms (Views: 37.2ms | ActiveRecord: 0.4ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:44:09 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered payments/new.html.haml within layouts/application (7.2ms)
Completed 200 OK in 41ms (Views: 36.2ms | ActiveRecord: 0.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:44:20 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"atcAxZmmjEUTlqKStwLBlKBpWkMsnrrHuYmOcyWdST1+OHTe61xYmA1uuTu4xhlm3fhVVwNuHOCNo3ccY/RsqA==", "payment"=>{"quantity"=>"4", "customer_type"=>"Personal", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"105", "commit.y"=>"16", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (24.9ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 4, 1, 'Personal', '2015-11-27 17:44:20', '2015-11-27 17:44:20')
  [1m[36m (50.6ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 91ms (ActiveRecord: 77.0ms)

AttrRequired::AttrMissing - 'username', 'password', 'signature' required.:
  attr_required (1.0.0) lib/attr_required.rb:59:in `attr_missing!'
  paypal-express (0.8.1) lib/paypal/base.rb:16:in `initialize'
  paypal-express (0.8.1) lib/paypal/nvp/request.rb:23:in `initialize'
  app/models/payment.rb:52:in `client'
  app/models/payment.rb:14:in `setup!'
  app/controllers/payments_controller.rb:11:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/ab9be4c8677546c1/variables" for 127.0.0.1 at 2015-11-28 00:44:21 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:45:48 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.1ms)
Completed 200 OK in 39ms (Views: 33.3ms | ActiveRecord: 0.5ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:45:49 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7PKuXOMAeQl2RBJEwJEz0plJgecOjr1Ez8wOLL/5vpX4HdpHkfqt1Gi8Ce3PVesg5NiO8yF+G2P75vdD+ZCbAA==", "payment"=>{"quantity"=>"", "customer_type"=>"Personal", "customer_id"=>"", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"59", "commit.y"=>"20", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.5ms)

ActiveRecord::RecordInvalid - Validation failed: Quantity can't be blank:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  activerecord (4.2.1) lib/active_record/persistence.rb:51:in `create!'
  app/controllers/payments_controller.rb:10:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/8a324752bf92370f/variables" for 127.0.0.1 at 2015-11-28 00:45:49 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:45:53 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.1ms)
Completed 200 OK in 37ms (Views: 32.8ms | ActiveRecord: 0.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:45:56 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pUqy7pJ8CeFM6Iw76kTBxO9rSht9BqSslm5gQgLCDEqxpcb14IbdPFIQl5LlgBk2kvpFD1L2AouiRJktRKsp3w==", "payment"=>{"quantity"=>"1", "customer_type"=>"Personal", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"92", "commit.y"=>"14", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (14.8ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Personal', '2015-11-27 17:45:56', '2015-11-27 17:45:56')[0m
  [1m[35m (103.8ms)[0m  COMMIT
Completed 500 Internal Server Error in 128ms (ActiveRecord: 118.8ms)

AttrRequired::AttrMissing - 'username', 'password', 'signature' required.:
  attr_required (1.0.0) lib/attr_required.rb:59:in `attr_missing!'
  paypal-express (0.8.1) lib/paypal/base.rb:16:in `initialize'
  paypal-express (0.8.1) lib/paypal/nvp/request.rb:23:in `initialize'
  app/models/payment.rb:52:in `client'
  app/models/payment.rb:14:in `setup!'
  app/controllers/payments_controller.rb:11:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/cb1fb6ba5c049d7e/variables" for 127.0.0.1 at 2015-11-28 00:45:56 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:47:43 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered payments/new.html.haml within layouts/application (3.0ms)
Completed 200 OK in 104ms (Views: 33.2ms | ActiveRecord: 0.5ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:47:47 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0VLSNaJ6zo/pqyXbHX6P2PRnEcCQ9eIVr0vbEgWVgnXFvaYu0IAaUvdTPnISulcqifYe1L8FRDKbYSJ9Q/yn4A==", "payment"=>{"quantity"=>"1", "customer_type"=>"Personal", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"80", "commit.y"=>"15", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Personal', '2015-11-27 17:47:47', '2015-11-27 17:47:47')
  [1m[36m (87.2ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 98ms (ActiveRecord: 87.8ms)

AttrRequired::AttrMissing - 'username', 'password', 'signature' required.:
  attr_required (1.0.0) lib/attr_required.rb:59:in `attr_missing!'
  paypal-express (0.8.1) lib/paypal/base.rb:16:in `initialize'
  paypal-express (0.8.1) lib/paypal/nvp/request.rb:23:in `initialize'
  app/models/payment.rb:52:in `client'
  app/models/payment.rb:14:in `setup!'
  app/controllers/payments_controller.rb:11:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/82fdf244c07e5f4f/variables" for 127.0.0.1 at 2015-11-28 00:47:47 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:47:59 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (20.1ms)
Completed 200 OK in 389ms (Views: 279.7ms | ActiveRecord: 5.7ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:48:03 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"qN4zf+3xEaurJFf4iWhbDx2bpKqXWayyGfYud1BDoau8MUdknwvFdrXcTFGGrIP9YAqrvripCpUt3NcYFiqEPg==", "payment"=>{"quantity"=>"1", "customer_type"=>"Personal", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"91", "commit.y"=>"17", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (17.4ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Personal', '2015-11-27 17:48:03', '2015-11-27 17:48:03')[0m
  [1m[35m (46.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-93S14567XL957700R' AND `payments`.`id` != 4) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-93S14567XL957700R', `updated_at` = '2015-11-27 17:48:05' WHERE `payments`.`id` = 4[0m
  [1m[35m (39.0ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-93S14567XL957700R&useraction=commit
Completed 302 Found in 2253ms (ActiveRecord: 105.4ms)
  [1m[36mPayment Load (0.5ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` ASC LIMIT 1[0m
  [1m[35mPayment Load (0.6ms)[0m  SELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1


Started GET "/payments/cancel?token=EC-93S14567XL957700R" for 127.0.0.1 at 2015-11-28 00:50:23 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-93S14567XL957700R"}
  [1m[36mPayment Load (22.0ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-93S14567XL957700R' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-93S14567XL957700R' AND `payments`.`id` != 4) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-27 17:50:23' WHERE `payments`.`id` = 4
  [1m[36m (30.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/payments/cancel_done
Completed 302 Found in 66ms (ActiveRecord: 54.6ms)


Started GET "/payments/cancel_done" for 127.0.0.1 at 2015-11-28 00:50:23 +0700
Processing by PaymentsController#cancel_done as HTML
  Rendered payments/cancel_done.html.haml within layouts/application (2.6ms)
Completed 200 OK in 44ms (Views: 38.8ms | ActiveRecord: 0.0ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:50:28 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (7.9ms)
Completed 200 OK in 49ms (Views: 41.7ms | ActiveRecord: 0.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:50:35 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iVu9ASUvwKvLgFZxm6dSSrmWCYsvKF6sH1i34zLeAF6dtMkaV9UUdtV4TdiUY4q4xAcGnwDY+Isrck6MdLclyw==", "payment"=>{"quantity"=>"4", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"87", "commit.y"=>"18", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (15.1ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 4, 1, 'User', '2015-11-27 17:50:35', '2015-11-27 17:50:35')[0m
  [1m[35m (43.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-4EH542024S555321V' AND `payments`.`id` != 5) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-4EH542024S555321V', `updated_at` = '2015-11-27 17:50:37' WHERE `payments`.`id` = 5[0m
  [1m[35m (39.0ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-4EH542024S555321V&useraction=commit
Completed 302 Found in 2201ms (ActiveRecord: 99.9ms)


Started GET "/payments/cancel?token=EC-4EH542024S555321V" for 127.0.0.1 at 2015-11-28 00:50:54 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-4EH542024S555321V"}
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-4EH542024S555321V' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPayment Exists (7.4ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-4EH542024S555321V' AND `payments`.`id` != 5) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-27 17:50:54' WHERE `payments`.`id` = 5
  [1m[36m (34.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/payments/cancel_done
Completed 302 Found in 55ms (ActiveRecord: 43.6ms)


Started GET "/payments/cancel_done" for 127.0.0.1 at 2015-11-28 00:50:54 +0700
Processing by PaymentsController#cancel_done as HTML
  Rendered payments/cancel_done.html.haml within layouts/application (0.2ms)
Completed 200 OK in 38ms (Views: 34.2ms | ActiveRecord: 0.0ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:51:00 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.1ms)
Completed 200 OK in 39ms (Views: 32.0ms | ActiveRecord: 0.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:51:11 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mYbMowEwAiW3E+tl0eHx68TIMpiMkQT0T50qwgve2/eNabi4c8rW+Knr8MzeJSkZuVk9jKNhotN7t9OtTbf+Yg==", "payment"=>{"quantity"=>"1", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"95", "commit.y"=>"12", "commit"=>"Pay on Paypal"}
Unpermitted parameter: user_id
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (13.9ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Collection', '2015-11-27 17:51:11', '2015-11-27 17:51:11')[0m
  [1m[35m (60.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.6ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-8W491902JN982940T' AND `payments`.`id` != 6) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-8W491902JN982940T', `updated_at` = '2015-11-27 17:51:13' WHERE `payments`.`id` = 6[0m
  [1m[35m (36.2ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-8W491902JN982940T&useraction=commit
Completed 302 Found in 2092ms (ActiveRecord: 112.4ms)


Started GET "/payments/cancel?token=EC-8W491902JN982940T" for 127.0.0.1 at 2015-11-28 00:51:24 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-8W491902JN982940T"}
  [1m[36mPayment Load (0.4ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-8W491902JN982940T' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mPayment Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-8W491902JN982940T' AND `payments`.`id` != 6) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-27 17:51:24' WHERE `payments`.`id` = 6
  [1m[36m (39.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/payments/cancel_done
Completed 302 Found in 50ms (ActiveRecord: 41.2ms)


Started GET "/payments/cancel_done" for 127.0.0.1 at 2015-11-28 00:51:24 +0700
Processing by PaymentsController#cancel_done as HTML
  Rendered payments/cancel_done.html.haml within layouts/application (0.2ms)
Completed 200 OK in 39ms (Views: 34.1ms | ActiveRecord: 0.0ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:52:05 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (53959.6ms)
Completed 200 OK in 54007ms (Views: 54001.6ms | ActiveRecord: 0.4ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:53:00 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (17.1ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.5ms)

NoMethodError - undefined method `merge' for "1":String:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:1869:in `objectify_options'
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:1750:in `hidden_field'
  app/views/payments/new.html.haml:25:in `block in _app_views_payments_new_html_haml___128512960716705701_69984009368520'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block (2 levels) in form_for_with_haml'
  haml (4.0.7) lib/haml/helpers.rb:278:in `with_tabs'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block in form_for_with_haml'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:52:in `capture_with_haml'
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:444:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml___128512960716705701_69984009368520'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/453e035337f6efa9/variables" for 127.0.0.1 at 2015-11-28 00:53:00 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:53:04 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (4.0ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms)

NoMethodError - undefined method `merge' for "1":String:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:1869:in `objectify_options'
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:1750:in `hidden_field'
  app/views/payments/new.html.haml:25:in `block in _app_views_payments_new_html_haml___128512960716705701_69984009368520'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block (2 levels) in form_for_with_haml'
  haml (4.0.7) lib/haml/helpers.rb:278:in `with_tabs'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:137:in `block in form_for_with_haml'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:200:in `with_output_buffer'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:5:in `with_output_buffer_with_haml_xss'
  actionview (4.2.1) lib/action_view/helpers/capture_helper.rb:38:in `capture'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:52:in `capture_with_haml'
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:444:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml___128512960716705701_69984009368520'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/59be4fec30851f7c/variables" for 127.0.0.1 at 2015-11-28 00:53:04 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:54:17 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (7.7ms)
Completed 200 OK in 45ms (Views: 38.2ms | ActiveRecord: 0.5ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:55:01 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.4ms)
Completed 200 OK in 92ms (Views: 33.9ms | ActiveRecord: 5.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 00:56:53 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.6ms)
Completed 200 OK in 95ms (Views: 32.8ms | ActiveRecord: 5.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 00:56:59 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RlrpQpyu/RSoOX/961JiiMoOAsklFNfoSZGLAsB2lRhStZ1Z7lQpybbBZFTklrp6t58N3Qrkcc99u3Jthh+wjQ==", "payment"=>{"quantity"=>"2", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"94", "commit.y"=>"19", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (32.4ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 2, 1, 'Collection', 1, '2015-11-27 17:56:59', '2015-11-27 17:56:59')[0m
  [1m[35m (57.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (1.0ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-8MU64669GM790423D' AND `payments`.`id` != 7) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-8MU64669GM790423D', `updated_at` = '2015-11-27 17:57:01' WHERE `payments`.`id` = 7[0m
  [1m[35m (44.0ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-8MU64669GM790423D&useraction=commit
Completed 302 Found in 2146ms (ActiveRecord: 135.8ms)


Started GET "/payments/cancel?token=EC-8MU64669GM790423D" for 127.0.0.1 at 2015-11-28 00:57:22 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-8MU64669GM790423D"}
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-8MU64669GM790423D' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-8MU64669GM790423D' AND `payments`.`id` != 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-27 17:57:22' WHERE `payments`.`id` = 7
  [1m[36m (56.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/payments/cancel_done
Completed 302 Found in 72ms (ActiveRecord: 58.1ms)


Started GET "/payments/cancel_done" for 127.0.0.1 at 2015-11-28 00:57:22 +0700
Processing by PaymentsController#cancel_done as HTML
  Rendered payments/cancel_done.html.haml within layouts/application (0.1ms)
Completed 200 OK in 35ms (Views: 30.4ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 10:02:12 +0700
Processing by PaymentsController#new as HTML
  [1m[35mAuthenticationToken Load (11.4ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1
  Rendered payments/new.html.haml within layouts/application (5.8ms)
Completed 200 OK in 122ms (Views: 93.0ms | ActiveRecord: 11.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 10:02:18 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fdbjZKIXUl2vgZZkkYQcUC1spmXT+ihOnf8/O1DzPczSCLCA+EJsnd7IDKO6Fs57enZ0ba6EUvb3bX9d4MkPLg==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>""}, "commit.x"=>"121", "commit.y"=>"14", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (43.8ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', '2015-11-28 03:02:18', '2015-11-28 03:02:18')
  [1m[36m (45.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-6NL81729LC426274R' AND `payments`.`id` != 8) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `payments` SET `token` = 'EC-6NL81729LC426274R', `updated_at` = '2015-11-28 03:02:21' WHERE `payments`.`id` = 8
  [1m[36m (40.5ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-6NL81729LC426274R&useraction=commit
Completed 302 Found in 2401ms (ActiveRecord: 131.9ms)
  [1m[35mPayment Load (0.7ms)[0m  SELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1


Started GET "/payments/success?token=EC-6NL81729LC426274R&PayerID=GYBCEHSKAV74C" for 127.0.0.1 at 2015-11-28 10:03:34 +0700
Processing by PaymentsController#success as HTML
  Parameters: {"token"=>"EC-6NL81729LC426274R", "PayerID"=>"GYBCEHSKAV74C"}
  [1m[35mPayment Load (15.5ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-6NL81729LC426274R' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.6ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-6NL81729LC426274R' AND `payments`.`id` != 8) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `payments` SET `payer_id` = 'GYBCEHSKAV74C', `transaction_id` = '7HV142360V573164M', `status` = 'completed', `purchased_at` = '2015-11-28 03:03:39', `updated_at` = '2015-11-28 03:03:39' WHERE `payments`.`id` = 8[0m
  [1m[35m (40.8ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/7HV142360V573164M
Completed 302 Found in 4254ms (ActiveRecord: 58.0ms)


Started GET "/payments/7HV142360V573164M" for 127.0.0.1 at 2015-11-28 10:03:39 +0700
Processing by PaymentsController#show as HTML
  Parameters: {"id"=>"7HV142360V573164M"}
  [1m[36mPayment Load (0.7ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`transaction_id` = '7HV142360V573164M' LIMIT 1[0m
  Rendered payments/show.html.haml within layouts/application (2.1ms)
Completed 200 OK in 64ms (Views: 56.7ms | ActiveRecord: 0.7ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 10:04:42 +0700
Processing by PaymentsController#new as HTML
  [1m[35mAuthenticationToken Load (0.4ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1
  Rendered payments/new.html.haml within layouts/application (5.0ms)
Completed 200 OK in 61ms (Views: 50.1ms | ActiveRecord: 0.4ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 10:04:54 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hykJWRJbfES7kvqEZe2pbM32XcLPcPSappP35je1gyoo91q9SA5ChMrbYENOf3tHmuyPyrIOjiLMAbeAh4+xyA==", "payment"=>{"quantity"=>"4", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>""}, "commit.x"=>"76", "commit.y"=>"26", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (93.9ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 4, 1, 'Collection', '2015-11-28 03:04:54', '2015-11-28 03:04:54')
  [1m[36m (83.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3VC486901J9984035' AND `payments`.`id` != 9) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE `payments` SET `token` = 'EC-3VC486901J9984035', `updated_at` = '2015-11-28 03:05:01' WHERE `payments`.`id` = 9
  [1m[36m (36.3ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-3VC486901J9984035&useraction=commit
Completed 302 Found in 7605ms (ActiveRecord: 216.0ms)


Started GET "/payments/cancel?token=EC-3VC486901J9984035" for 127.0.0.1 at 2015-11-28 10:05:48 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-3VC486901J9984035"}
  [1m[35mPayment Load (0.6ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-3VC486901J9984035' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (20.8ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3VC486901J9984035' AND `payments`.`id` != 9) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-28 03:05:48' WHERE `payments`.`id` = 9[0m
  [1m[35m (42.2ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/cancel_done
Completed 302 Found in 76ms (ActiveRecord: 64.4ms)


Started GET "/payments/cancel_done" for 127.0.0.1 at 2015-11-28 10:05:48 +0700
Processing by PaymentsController#cancel_done as HTML
  Rendered payments/cancel_done.html.haml within layouts/application (0.2ms)
Completed 200 OK in 33ms (Views: 30.1ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 10:42:53 +0700
Processing by PaymentsController#new as HTML
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (7.2ms)
Completed 200 OK in 171ms (Views: 70.2ms | ActiveRecord: 14.9ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 10:42:59 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"UxDoVYQbdVDNMzWY4PBMXmVGU/OhKz6dBHmMsAfvID38zrux3k5LkLx6r1/LYp51MlyB+9xVRCVu68zWt9US3w==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>""}, "commit.x"=>"100", "commit.y"=>"13", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (15.2ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', '2015-11-28 03:42:59', '2015-11-28 03:42:59')[0m
  [1m[35m (69.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.8ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3X986048S5813300N' AND `payments`.`id` != 10) LIMIT 1
  [1m[36mPayment Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`transaction_id` IS NULL AND `payments`.`id` != 10) LIMIT 1[0m
  [1m[35m (44.8ms)[0m  ROLLBACK
Completed 422 Unprocessable Entity in 1718ms (ActiveRecord: 131.2ms)

ActiveRecord::RecordInvalid - Validation failed: Transaction has already been taken:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  app/models/payment.rb:22:in `setup!'
  app/controllers/payments_controller.rb:11:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/218140c85080a500/variables" for 127.0.0.1 at 2015-11-28 10:43:01 +0700


Started POST "/__better_errors/218140c85080a500/variables" for 127.0.0.1 at 2015-11-28 10:43:15 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 10:43:42 +0700
Processing by PaymentsController#new as HTML
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1[0m
  Rendered payments/new.html.haml within layouts/application (3.2ms)
Completed 200 OK in 66ms (Views: 29.8ms | ActiveRecord: 2.6ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-11-28 10:43:42 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-11-28 10:43:42 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-11-28 10:43:42 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-11-28 10:43:42 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-11-28 10:43:42 +0700


Started POST "/payments" for 127.0.0.1 at 2015-11-28 10:44:02 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4G4J6us0bMl5MduO4T3tHvA2+FpObAju1y8AnnMeXzZPsFoOsWFSCQh4QUnKrz81pywqUjMScla9vUD4wyRt1A==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>""}, "commit.x"=>"128", "commit.y"=>"20", "commit"=>"Pay on Paypal"}
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (56.9ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', '2015-11-28 03:44:02', '2015-11-28 03:44:02')[0m
  [1m[35m (26.4ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-1H146957BB1211921' AND `payments`.`id` != 11) LIMIT 1
  [1m[36mPayment Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`transaction_id` IS NULL AND `payments`.`id` != 11) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-1H146957BB1211921&useraction=commit
Completed 302 Found in 1704ms (ActiveRecord: 85.5ms)


Started GET "/payments/success?token=EC-1H146957BB1211921&PayerID=GYBCEHSKAV74C" for 127.0.0.1 at 2015-11-28 10:44:20 +0700
Processing by PaymentsController#success as HTML
  Parameters: {"token"=>"EC-1H146957BB1211921", "PayerID"=>"GYBCEHSKAV74C"}
  [1m[36mPayment Load (1.9ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-1H146957BB1211921' LIMIT 1[0m
Completed 404 Not Found in 9ms (ActiveRecord: 1.9ms)

ActiveRecord::RecordNotFound - Couldn't find Payment:
  activerecord (4.2.1) lib/active_record/core.rb:196:in `find_by!'
  activerecord (4.2.1) lib/active_record/dynamic_matchers.rb:70:in `find_by_token!'
  activerecord (4.2.1) lib/active_record/dynamic_matchers.rb:24:in `method_missing'
  app/controllers/payments_controller.rb:44:in `handle_callback'
  app/controllers/payments_controller.rb:26:in `success'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/c4b5cb68759cd9d1/variables" for 127.0.0.1 at 2015-11-28 10:44:20 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-11-28 10:55:14 +0700
Processing by PaymentsController#new as HTML
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1
  Rendered payments/new.html.haml within layouts/application (6.8ms)
Completed 200 OK in 135ms (Views: 63.6ms | ActiveRecord: 3.1ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 10:55:21 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1E7aqGWEyXNAsYUG6bj6k6KWNg9vHbtFdQ+mlSlcgXN7kIlMP9H3szH4H8HCKii49YzkBxJjwf0fnebzmWazkQ==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>""}, "commit.x"=>"82", "commit.y"=>"18", "commit"=>"Pay on Paypal"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (8.1ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', '2015-11-28 03:55:21', '2015-11-28 03:55:21')
  [1m[36m (45.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3P822952GU312760N' AND `payments`.`id` != 12) LIMIT 1[0m
  [1m[35mPayment Exists (0.4ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`transaction_id` IS NULL AND `payments`.`id` != 12) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3P822952GU312760N' AND `payments`.`id` != 12) LIMIT 1[0m
  [1m[35mPayment Exists (0.2ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`transaction_id` IS NULL AND `payments`.`id` != 12) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-3P822952GU312760N' AND `payments`.`id` != 12) LIMIT 1[0m
  [1m[35mPayment Exists (0.2ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`transaction_id` IS NULL AND `payments`.`id` != 12) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mUser Load (12.9ms)[0m  SELECT  `users`.* FROM `users`  ORDER BY `users`.`id` ASC LIMIT 1
  [1m[36mCollection Load (30.1ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mCollection Exists (21.1ms)[0m  [1mSELECT  1 AS one FROM `collections` WHERE `collections`.`user_id` = BINARY 1 LIMIT 1[0m
  [1m[35mSQL (31.6ms)[0m  INSERT INTO `collections` (`user_id`, `name`, `created_at`, `updated_at`) VALUES (1, 'company1', '2015-11-28 06:16:13', '2015-11-28 06:16:13')
  [1m[36mUserCollection Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM `user_collections` WHERE (`user_collections`.`user_id` = BINARY 1 AND `user_collections`.`collection_id` = 1) LIMIT 1[0m
  [1m[35mSQL (15.0ms)[0m  INSERT INTO `user_collections` (`user_id`, `collection_id`, `created_at`, `updated_at`) VALUES (1, 1, '2015-11-28 06:16:13', '2015-11-28 06:16:13')
  [1m[36m (46.7ms)[0m  [1mCOMMIT[0m
  [1m[35mUserCollection Load (0.6ms)[0m  SELECT  `user_collections`.* FROM `user_collections`  ORDER BY `user_collections`.`id` DESC LIMIT 1
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-3P822952GU312760N&useraction=commit
Completed 302 Found in 8501667ms (ActiveRecord: 56.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:17:03 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (49.3ms)
Completed 200 OK in 445ms (Views: 238.7ms | ActiveRecord: 24.3ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-11-28 13:17:03 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-11-28 13:17:03 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-11-28 13:17:03 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-11-28 13:17:04 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-11-28 13:17:04 +0700


Started POST "/payments" for 127.0.0.1 at 2015-11-28 13:18:21 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"C2y0xOjJ+/seDx8jdW2SEuVF+V85esD1bt4zsIc5K6j6CtIgSJKOTxTbSlopz1EVY8kwiKxlSd5r84w9QzkwbQ==", "payment"=>{"quantity"=>"1", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"129", "commit.y"=>"21", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (14.9ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Collection', 1, '2015-11-28 06:18:21', '2015-11-28 06:18:21')
  [1m[36m (42.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-9G4177181U8776312' AND `payments`.`id` != 13) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `payments` SET `token` = 'EC-9G4177181U8776312', `updated_at` = '2015-11-28 06:18:22' WHERE `payments`.`id` = 13
  [1m[36m (39.3ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-9G4177181U8776312&useraction=commit
Completed 302 Found in 1666ms (ActiveRecord: 98.2ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m
  [1m[35mPayment Load (0.9ms)[0m  SELECT `payments`.* FROM `payments`


Started GET "/payments/cancel?token=EC-9G4177181U8776312" for 127.0.0.1 at 2015-11-28 13:19:10 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-9G4177181U8776312"}
  [1m[35mPayment Load (19.1ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-9G4177181U8776312' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.6ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-9G4177181U8776312' AND `payments`.`id` != 13) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-28 06:19:10' WHERE `payments`.`id` = 13[0m
  [1m[35m (28.9ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/close_popup
Completed 302 Found in 61ms (ActiveRecord: 49.7ms)


Started GET "/payments/close_popup" for 127.0.0.1 at 2015-11-28 13:19:10 +0700
Processing by PaymentsController#close_popup as HTML
  Rendered payments/close_popup.html.haml within layouts/application (2.1ms)
Completed 200 OK in 70ms (Views: 66.4ms | ActiveRecord: 0.0ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:19:27 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (9.1ms)
Completed 200 OK in 48ms (Views: 40.6ms | ActiveRecord: 0.8ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 13:19:37 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"d7oUXEjCMx5JQorhAhOkq+KysefjgJo+faiQajPWgOqG3HK46JlGqkOW35hesWesZD54MHafExV4hS/n99abLw==", "payment"=>{"quantity"=>"1", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"121", "commit.y"=>"13", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'Collection', 1, '2015-11-28 06:19:37', '2015-11-28 06:19:37')[0m
  [1m[35m (39.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-6HC29457Y5816780J' AND `payments`.`id` != 14) LIMIT 1
  [1m[36mSQL (23.7ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-6HC29457Y5816780J', `updated_at` = '2015-11-28 06:19:39' WHERE `payments`.`id` = 14[0m
  [1m[35m (41.1ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-6HC29457Y5816780J&useraction=commit
Completed 302 Found in 1482ms (ActiveRecord: 105.5ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:20:00 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (9.8ms)
Completed 200 OK in 52ms (Views: 44.4ms | ActiveRecord: 0.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:20:58 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.4ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (11.5ms)
Completed 200 OK in 57ms (Views: 48.1ms | ActiveRecord: 0.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:21:18 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.3ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (9.7ms)
Completed 200 OK in 50ms (Views: 40.3ms | ActiveRecord: 0.8ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:24:43 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.3ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (9.9ms)
Completed 200 OK in 49ms (Views: 39.4ms | ActiveRecord: 0.9ms)
  [1m[35m (80.6ms)[0m  BEGIN
  [1m[36mCollection Exists (119.2ms)[0m  [1mSELECT  1 AS one FROM `collections` WHERE `collections`.`user_id` = BINARY 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCollection Exists (0.2ms)[0m  SELECT  1 AS one FROM `collections` WHERE `collections`.`user_id` = BINARY 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'xxx@xxx.com' AND `users`.`provider` IS NULL) LIMIT 1[0m
  [1m[35mSQL (24.7ms)[0m  INSERT INTO `users` (`email`, `password_digest`, `created_at`, `updated_at`) VALUES ('xxx@xxx.com', '$2a$10$mRV.ZUyDS8F3q7Un45.11eELEvNIHxAiAB/V3ynoj8EypIKaPo.f6', '2015-11-28 06:41:29', '2015-11-28 06:41:29')
  [1m[36mAuthenticationToken Load (0.7ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`user_id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `authentication_tokens` (`user_id`, `access_token`, `created_at`, `updated_at`) VALUES (2, '6715156ea7f621f7531a4b71e50a21fbefce506784b31addcb5fb0c1ba8ab04c2b71ea796cb5d89711e5d1ae6afb7cee10e080bcf9026139a6d15377fceb2ce4', '2015-11-28 06:41:29', '2015-11-28 06:41:29')
  [1m[36m (64.9ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  `users`.* FROM `users`  ORDER BY `users`.`id` DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCollection Exists (0.6ms)[0m  SELECT  1 AS one FROM `collections` WHERE `collections`.`user_id` = BINARY 2 LIMIT 1
  [1m[36mSQL (16.9ms)[0m  [1mINSERT INTO `collections` (`user_id`, `name`, `created_at`, `updated_at`) VALUES (2, 'Company2', '2015-11-28 06:41:55', '2015-11-28 06:41:55')[0m
  [1m[35mUserCollection Exists (0.6ms)[0m  SELECT  1 AS one FROM `user_collections` WHERE (`user_collections`.`user_id` = BINARY 2 AND `user_collections`.`collection_id` = 2) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `user_collections` (`user_id`, `collection_id`, `created_at`, `updated_at`) VALUES (2, 2, '2015-11-28 06:41:55', '2015-11-28 06:41:55')[0m
  [1m[35m (21.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUserCollection Exists (0.5ms)[0m  SELECT  1 AS one FROM `user_collections` WHERE (`user_collections`.`user_id` = BINARY 1 AND `user_collections`.`collection_id` = 2) LIMIT 1
  [1m[36mSQL (22.9ms)[0m  [1mINSERT INTO `user_collections` (`user_id`, `collection_id`, `created_at`, `updated_at`) VALUES (1, 2, '2015-11-28 06:42:26', '2015-11-28 06:42:26')[0m
  [1m[35m (41.2ms)[0m  COMMIT


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:42:41 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.6ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (12.5ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (14.1ms)
Completed 200 OK in 288ms (Views: 68.2ms | ActiveRecord: 83.5ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 13:42:53 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"PCccVS/bUYRFZEkyQK8VmrJqzQXIYl6YcZfJ3BrHi0KT+U+xdY5vRDQt0/VrPcex5XAfDbUcJCAbBYm6qv25oA==", "payment"=>{"quantity"=>"4", "customer_type"=>"Collection", "customer_id"=>"2", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"117", "commit.y"=>"15", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (58.5ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 4, 2, 'Collection', 1, '2015-11-28 06:42:53', '2015-11-28 06:42:53')[0m
  [1m[35m (95.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-1EB10413N4504760T' AND `payments`.`id` != 15) LIMIT 1
  [1m[36mSQL (35.0ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-1EB10413N4504760T', `updated_at` = '2015-11-28 06:42:55' WHERE `payments`.`id` = 15[0m
  [1m[35m (37.1ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-1EB10413N4504760T&useraction=commit
Completed 302 Found in 1807ms (ActiveRecord: 227.0ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/cancel?token=EC-1EB10413N4504760T" for 127.0.0.1 at 2015-11-28 13:43:13 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-1EB10413N4504760T"}
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-1EB10413N4504760T' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-1EB10413N4504760T' AND `payments`.`id` != 15) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-28 06:43:13' WHERE `payments`.`id` = 15
  [1m[36m (44.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/payments/close_popup
Completed 302 Found in 59ms (ActiveRecord: 46.5ms)


Started GET "/payments/close_popup" for 127.0.0.1 at 2015-11-28 13:43:13 +0700
Processing by PaymentsController#close_popup as HTML
  Rendered payments/close_popup.html.haml within layouts/application (0.4ms)
Completed 200 OK in 71ms (Views: 67.1ms | ActiveRecord: 0.0ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:43:16 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (5.6ms)
Completed 200 OK in 47ms (Views: 40.1ms | ActiveRecord: 0.6ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 13:43:19 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JK/pb+6bFUqYn9eltRWINSv+4Rd0q5hQjRbfZeg+UWaLcbqLtM4riunWTWKeh1oefOQzHwnV4ujnhJ8DWARjhA==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"111", "commit.y"=>"14", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (4.3ms)[0m  INSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', 1, '2015-11-28 06:43:19', '2015-11-28 06:43:19')
  [1m[36m (50.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPayment Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-2ER66678GW420482H' AND `payments`.`id` != 16) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE `payments` SET `token` = 'EC-2ER66678GW420482H', `updated_at` = '2015-11-28 06:43:21' WHERE `payments`.`id` = 16
  [1m[36m (41.7ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-2ER66678GW420482H&useraction=commit
Completed 302 Found in 1515ms (ActiveRecord: 99.1ms)
  [1m[35mPayment Load (0.6ms)[0m  SELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1
  [1m[36mPayment Load (0.3ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/cancel?token=EC-2ER66678GW420482H" for 127.0.0.1 at 2015-11-28 13:43:37 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-2ER66678GW420482H"}
  [1m[35mPayment Load (0.6ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-2ER66678GW420482H' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (9.3ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-2ER66678GW420482H' AND `payments`.`id` != 16) LIMIT 1
  [1m[36mSQL (13.1ms)[0m  [1mUPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-11-28 06:43:37' WHERE `payments`.`id` = 16[0m
  [1m[35m (45.4ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/close_popup
Completed 302 Found in 78ms (ActiveRecord: 68.6ms)


Started GET "/payments/close_popup" for 127.0.0.1 at 2015-11-28 13:43:37 +0700
Processing by PaymentsController#close_popup as HTML
  Rendered payments/close_popup.html.haml within layouts/application (0.2ms)
Completed 200 OK in 36ms (Views: 33.2ms | ActiveRecord: 0.0ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 13:43:41 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (7.3ms)
Completed 200 OK in 51ms (Views: 43.8ms | ActiveRecord: 0.7ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:08:00 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"N4XWFoW5CIFH7QYoSHu06B9XAAghseRAqVB2CJo2Q5eYW4Xy3+w2QTaknO9j6WbDSE3SAFzPnvjDwjZuKgxxdQ==", "payment"=>{"quantity"=>"", "customer_type"=>"Collection", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"90", "commit.y"=>"18", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 422 Unprocessable Entity in 9ms (ActiveRecord: 0.4ms)

ActiveRecord::RecordInvalid - Validation failed: Quantity can't be blank:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  activerecord (4.2.1) lib/active_record/persistence.rb:51:in `create!'
  app/controllers/payments_controller.rb:14:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/4d3941dcea014a51/variables" for 127.0.0.1 at 2015-11-28 14:08:00 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:10:04 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (11.8ms)
Completed 200 OK in 112ms (Views: 42.5ms | ActiveRecord: 8.3ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:10:06 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"S4KvPVGpen59Og9spOZmCIwfPBLBmIQ70ZTIiN+jrhXkXPzZC/xEvgxzlauPdLQj2wXuGrzm/oO7Bojub5mc9w==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"103", "commit.y"=>"11", "commit"=>"Pay on Paypal"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  Rendered payments/new.html.haml within layouts/application (3.0ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:432:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml___128512960716705701_69984010164380'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/payments_controller.rb:22:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/f3a6cb2d24564860/variables" for 127.0.0.1 at 2015-11-28 14:10:06 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:10:43 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (12.3ms)
Completed 200 OK in 121ms (Views: 49.7ms | ActiveRecord: 8.5ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:10:45 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"woGEjCReg2Su69FW4h6g3j2A2GRZgYoPrS+N6bUZukVtX9dofgu9pN+iS5HJjHL1apoKbCT/8LfHvc2PBSOIpw==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"120", "commit.y"=>"11", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered text template (0.0ms)
Completed 200 OK in 53ms (Views: 42.2ms | ActiveRecord: 0.4ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:11:20 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (12.2ms)
Completed 200 OK in 126ms (Views: 42.5ms | ActiveRecord: 9.1ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:11:22 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Di8CD87P3Nqtzx1eam4OkI2rHzv4OntnjMtHx0SHHMmh8VHrlJriGtyGh5lB/Ny72rHNM4VEAd/mWQeh9L0uKw==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"79", "commit.y"=>"13", "commit"=>"Pay on Paypal"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  Rendered payments/new.html.haml within layouts/application (2.4ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:432:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml___128512960716705701_69984010164380'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/payments_controller.rb:22:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/4a170ac9ce743c5e/variables" for 127.0.0.1 at 2015-11-28 14:11:22 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:12:03 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (11.8ms)
Completed 200 OK in 118ms (Views: 42.4ms | ActiveRecord: 8.2ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:12:05 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AIvE1TTFWlsTlEdAOop/OBg/bwSZ5SDSdFRpB1SRciGvVZcxbpBkm2Ld3YcRGK0TTyW9DOSbWmoexilh5KtAww==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"97", "commit.y"=>"22", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Completed 422 Unprocessable Entity in 13ms (ActiveRecord: 0.4ms)

ActiveRecord::RecordInvalid - Validation failed: Quantity can't be blank:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  activerecord (4.2.1) lib/active_record/persistence.rb:51:in `create!'
  app/controllers/payments_controller.rb:14:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/307d8dbe6beca0c1/variables" for 127.0.0.1 at 2015-11-28 14:12:05 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:12:52 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (4.9ms)
Completed 200 OK in 47ms (Views: 38.5ms | ActiveRecord: 0.7ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 14:12:54 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bVOcRUgkTUJgfyoYefvnLkkSVvfKmNfDx3OJyCtohr6cNfqh6H849mqrf2ElWSQpz56fIF+HXujCXjZF72idew==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"135", "commit.y"=>"15", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 422 Unprocessable Entity in 9ms (ActiveRecord: 0.4ms)

ActiveRecord::RecordInvalid - Validation failed: Quantity can't be blank:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  activerecord (4.2.1) lib/active_record/persistence.rb:51:in `create!'
  app/controllers/payments_controller.rb:14:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/ab95cf9820b7b546/variables" for 127.0.0.1 at 2015-11-28 14:12:54 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 14:13:16 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (5.2ms)
Completed 200 OK in 49ms (Views: 41.1ms | ActiveRecord: 0.7ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-11-28 15:02:55 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (66.4ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (10.5ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (7.6ms)
Completed 200 OK in 608ms (Views: 375.4ms | ActiveRecord: 77.2ms)


Started POST "/payments" for 127.0.0.1 at 2015-11-28 15:03:03 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1a4Vgoj5Iim0Sl3NcEIBX+JSJKgqhJkKvsQHU7GLSJ96cEZm0qwc6cUDxwpb0NN0tUj2oFf647LUVkc1AbF6fQ==", "payment"=>{"quantity"=>"", "customer_type"=>"Collection", "customer_id"=>"2", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"121", "commit.y"=>"19", "commit"=>"Pay on Paypal"}
  [1m[36m (49.8ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
Completed 422 Unprocessable Entity in 60ms (ActiveRecord: 50.8ms)

ActiveRecord::RecordInvalid - Validation failed: Quantity can't be blank:
  activerecord (4.2.1) lib/active_record/validations.rb:79:in `raise_record_invalid'
  activerecord (4.2.1) lib/active_record/validations.rb:43:in `save!'
  activerecord (4.2.1) lib/active_record/attribute_methods/dirty.rb:29:in `save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `block in save!'
  activerecord (4.2.1) lib/active_record/transactions.rb:347:in `block in with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:220:in `transaction'
  activerecord (4.2.1) lib/active_record/transactions.rb:344:in `with_transaction_returning_status'
  activerecord (4.2.1) lib/active_record/transactions.rb:291:in `save!'
  activerecord (4.2.1) lib/active_record/persistence.rb:51:in `create!'
  app/controllers/payments_controller.rb:14:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/151114e2375fdfa0/variables" for 127.0.0.1 at 2015-11-28 15:03:03 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:13:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (88.7ms)
Completed 200 OK in 917ms (Views: 597.3ms | ActiveRecord: 37.0ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-12-02 22:13:58 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-12-02 22:13:58 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-12-02 22:13:58 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-12-02 22:13:58 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-12-02 22:13:58 +0700


Started POST "/payments" for 127.0.0.1 at 2015-12-02 22:14:03 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9drmEluz4TEm5s4Jqb+/rLv3kWmmYC62j6w/otfJRNoqePHk6ddI+HQXv90YpfI8xOys2jnHJbFxiXfr7HfVFg==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"117", "commit.y"=>"17", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  Rendered payments/new.html.haml within layouts/application (17.8ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.4ms)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:432:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:7:in `_app_views_payments_new_html_haml__3452937266928857317_61210540'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/payments_controller.rb:22:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/42eb259806c52fe4/variables" for 127.0.0.1 at 2015-12-02 22:14:03 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:14:54 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (6.3ms)
Completed 200 OK in 52ms (Views: 43.3ms | ActiveRecord: 0.6ms)


Started POST "/payments" for 127.0.0.1 at 2015-12-02 22:14:56 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wTJM5CUK9/5QDPkW4VDztjEdQmkyaaozm5aIuU4uccAekFsSl25eNwL9iMJQSr4mTgZ/2q3OoTRls8DwdZDgDA==", "payment"=>{"quantity"=>"1", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"78", "commit.y"=>"14", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (93.0ms)[0m  [1mINSERT INTO `payments` (`payment_method_id`, `quantity`, `customer_id`, `customer_type`, `user_id`, `created_at`, `updated_at`) VALUES (1, 1, 1, 'User', 1, '2015-12-02 15:14:56', '2015-12-02 15:14:56')[0m
  [1m[35m (92.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (17.7ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-2XN00507RY6336452' AND `payments`.`id` != 17) LIMIT 1
  [1m[36mSQL (12.8ms)[0m  [1mUPDATE `payments` SET `token` = 'EC-2XN00507RY6336452', `updated_at` = '2015-12-02 15:14:59' WHERE `payments`.`id` = 17[0m
  [1m[35m (38.6ms)[0m  COMMIT
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-2XN00507RY6336452&useraction=commit
Completed 302 Found in 2945ms (ActiveRecord: 254.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:15:10 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (4.5ms)
Completed 200 OK in 44ms (Views: 34.2ms | ActiveRecord: 0.9ms)


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:15:44 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[35mAuthenticationToken Load (0.2ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1
  Rendered payments/new.html.haml within layouts/application (11.5ms)
Completed 200 OK in 244ms (Views: 41.4ms | ActiveRecord: 7.8ms)


Started POST "/payments" for 127.0.0.1 at 2015-12-02 22:15:48 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"FNDN16dU4F/fOjQOGhsneCvCzoJUbj+7GDKsN5DpYj/LctohFTBJlo3LRdqrAWroVNnzMcvJNLzmF+R+q1fz8w==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"102", "commit.y"=>"19", "commit"=>"Pay on Paypal"}
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  Rendered payments/new.html.haml within layouts/application (27931.6ms)
Completed 500 Internal Server Error in 101893ms (ActiveRecord: 0.9ms)

ArgumentError - First argument in form cannot contain nil or be empty:
  actionview (4.2.1) lib/action_view/helpers/form_helper.rb:432:in `form_for'
  haml (4.0.7) lib/haml/helpers/action_view_mods.rb:139:in `form_for_with_haml'
  haml (4.0.7) lib/haml/helpers/action_view_xss_mods.rb:28:in `form_for_with_haml_xss'
  app/views/payments/new.html.haml:8:in `_app_views_payments_new_html_haml__3452937266928857317_79828540'
  actionview (4.2.1) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.1) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.1) lib/action_view/template.rb:143:in `render'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.1) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.1) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.1) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.1) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.1) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (4.2.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:43:in `render'
  app/controllers/payments_controller.rb:23:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/fa8d6f1504b89ed4/variables" for 127.0.0.1 at 2015-12-02 22:17:30 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:17:38 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (631.5ms)
Completed 200 OK in 178454ms (Views: 661.4ms | ActiveRecord: 8.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-12-02 22:20:40 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/4X/gVwhsTVHaQrvq5C2Qb+b2AddHoAZbNOYcyzrS28gJ+h37kUY/BWYezsaivvRwIDltMK5ix6S9tA6F1Xaow==", "payment"=>{"quantity"=>"", "customer_type"=>"User", "customer_id"=>"1", "payment_method_id"=>"1", "user_id"=>"1"}, "commit.x"=>"70", "commit.y"=>"21", "commit"=>"Pay on Paypal"}
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35mAuthenticationToken Load (0.5ms)[0m  SELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` IS NULL LIMIT 1
Completed 500 Internal Server Error in 47ms (ActiveRecord: 4.7ms)

NoMethodError - undefined method `collections' for false:FalseClass:
  app/controllers/payments_controller.rb:24:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/9932c107226a3ea2/variables" for 127.0.0.1 at 2015-12-02 22:20:40 +0700


Started GET "/payments/new?access_token=7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2" for 127.0.0.1 at 2015-12-02 22:53:20 +0700
Processing by PaymentsController#new as HTML
  Parameters: {"access_token"=>"7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2"}
  [1m[36mAuthenticationToken Load (0.2ms)[0m  [1mSELECT  `authentication_tokens`.* FROM `authentication_tokens` WHERE `authentication_tokens`.`access_token` = '7d79252c74dac5130e9493668d282ad87a5fdc5595046cdf13a5c56487bdde7df154a588d280a043233fee2eebe124595366cafd5d0f530ad9209e7590a79ac2' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` INNER JOIN `user_collections` ON `collections`.`id` = `user_collections`.`collection_id` WHERE `user_collections`.`user_id` = 1[0m
  Rendered payments/new.html.haml within layouts/application (13869.0ms)
Completed 200 OK in 13949ms (Views: 13911.2ms | ActiveRecord: 4.4ms)
  [1m[36m (288.5ms)[0m  [1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (259.2ms)[0m  CREATE UNIQUE INDEX `unique_schema_migrations`  ON `schema_migrations` (`version`) 
  [1m[36mActiveRecord::SchemaMigration Load (7.4ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Migrating to CreatePayments (20151123081900)
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/asvenus/Project/Demo/demo/xxx/db/migrate/20151123081900_create_payments.rb:10)
  [1m[35m (108.0ms)[0m  CREATE TABLE `payments` (`id` int(11) auto_increment PRIMARY KEY, `expires_at` datetime, `purchased_at` datetime, `quantity` int(11), `status` varchar(255), `deleted_at` datetime, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151123081900')
  [1m[36m (37.1ms)[0m  [1mCOMMIT[0m
Migrating to AddColumnTransactionIdToPayments (20151124081442)
  [1m[35m (167.7ms)[0m  ALTER TABLE `payments` ADD `transaction_id` varchar(255)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (15.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20151124081442')
  [1m[36m (32.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAmountPayerIdCanceledTokenToPayment (20151126070744)
  [1m[35m (250.9ms)[0m  ALTER TABLE `payments` ADD `amount` int(11) DEFAULT 1
  [1m[36m (202.8ms)[0m  [1mALTER TABLE `payments` ADD `token` varchar(255)[0m
  [1m[35m (159.5ms)[0m  ALTER TABLE `payments` ADD `canceled` tinyint(1) DEFAULT 0
  [1m[36m (209.9ms)[0m  [1mALTER TABLE `payments` ADD `payer_id` varchar(255)[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20151126070744')[0m
  [1m[35m (30.3ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
  [1m[35m (22.5ms)[0m  SELECT fk.referenced_table_name as 'to_table'
      ,fk.referenced_column_name as 'primary_key'
      ,fk.column_name as 'column'
      ,fk.constraint_name as 'name'
FROM information_schema.key_column_usage fk
WHERE fk.referenced_column_name is not null
  AND fk.table_schema = 'demo_development'
  AND fk.table_name = 'payments'

  [1m[36m (0.3ms)[0m  [1mSHOW CREATE TABLE `payments`[0m


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 21:21:03 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (5385.2ms)
Completed 200 OK in 5890ms (Views: 5802.9ms | ActiveRecord: 2.2ms)


Started GET "/assets/application.self-e80e8f2318043e8af94dddc2adad5a4f09739a8ebb323b3ab31cd71d45fd9113.css?body=1" for 127.0.0.1 at 2015-12-28 21:21:09 +0700


Started GET "/assets/jquery.self-a714331225dda820228db323939889f149aec0127aeb06255646b616ba1ca419.js?body=1" for 127.0.0.1 at 2015-12-28 21:21:09 +0700


Started GET "/assets/jquery_ujs.self-d456baa54c1fa6be2ec3711f0a72ddf7a5b2f34a6b4f515f33767d6207b7d4b3.js?body=1" for 127.0.0.1 at 2015-12-28 21:21:09 +0700


Started GET "/assets/application.self-3b8dabdc891efe46b9a144b400ad69e37d7e5876bdc39dee783419a69d7ca819.js?body=1" for 127.0.0.1 at 2015-12-28 21:21:09 +0700


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2015-12-28 21:21:09 +0700


Started POST "/payments" for 127.0.0.1 at 2015-12-28 21:21:34 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+xmWC6g8i4VqcjS3YHztYA11RRFADkW0B6J40rC4QioypQ+RtFxmVDe8ZFCiLhMXXDqk+jvrhlz6xDxY6CmBeg==", "payment"=>{"quantity"=>"1"}, "commit.x"=>"112", "commit.y"=>"19", "commit"=>"Pay on Paypal"}
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (34.3ms)[0m  [1mINSERT INTO `payments` (`quantity`, `created_at`, `updated_at`) VALUES (1, '2015-12-28 14:21:35', '2015-12-28 14:21:35')[0m
  [1m[35m (53.8ms)[0m  COMMIT
Completed 500 Internal Server Error in 99ms (ActiveRecord: 88.2ms)

NoMethodError - undefined method `customer_type' for #<Payment:0x007f9bd49df0b8>:
  activemodel (4.2.1) lib/active_model/attribute_methods.rb:433:in `method_missing'
  app/models/payment.rb:11:in `setup!'
  app/controllers/payments_controller.rb:14:in `create'
  actionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.1) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  activerecord (4.2.1) lib/active_record/migration.rb:378:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/be8783021f9374d0/variables" for 127.0.0.1 at 2015-12-28 21:21:35 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 21:22:37 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (8.1ms)
Completed 200 OK in 69ms (Views: 46.6ms | ActiveRecord: 1.7ms)


Started POST "/payments" for 127.0.0.1 at 2015-12-28 21:22:41 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"RqFCumrRtrKv5nZ6YfNMyAo2/wlMkuc+j5KytI5h/CCPHdsgdrFbY/IoJp2jobK/W3ke4jd3JNZy9PY+1vA/cA==", "payment"=>{"quantity"=>"1"}, "commit.x"=>"55", "commit.y"=>"19", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (13.1ms)[0m  INSERT INTO `payments` (`quantity`, `created_at`, `updated_at`) VALUES (1, '2015-12-28 14:22:41', '2015-12-28 14:22:41')
  [1m[36m (54.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (24.0ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-1XM93069VE646214F' AND `payments`.`id` != 2) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE `payments` SET `token` = 'EC-1XM93069VE646214F', `updated_at` = '2015-12-28 14:22:43' WHERE `payments`.`id` = 2
  [1m[36m (29.6ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-1XM93069VE646214F&useraction=commit
Completed 302 Found in 2746ms (ActiveRecord: 122.9ms)


Started GET "/payments/success?token=EC-1XM93069VE646214F&PayerID=GYBCEHSKAV74C" for 127.0.0.1 at 2015-12-28 21:24:11 +0700
Processing by PaymentsController#success as HTML
  Parameters: {"token"=>"EC-1XM93069VE646214F", "PayerID"=>"GYBCEHSKAV74C"}
  [1m[35mPayment Load (1.2ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-1XM93069VE646214F' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (19.0ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-1XM93069VE646214F' AND `payments`.`id` != 2) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `payments` SET `payer_id` = 'GYBCEHSKAV74C', `transaction_id` = '3SK76781JF031145R', `status` = 'completed', `purchased_at` = '2015-12-28 14:24:16', `updated_at` = '2015-12-28 14:24:16' WHERE `payments`.`id` = 2[0m
  [1m[35m (37.2ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/close_popup
Completed 302 Found in 5254ms (ActiveRecord: 58.6ms)


Started GET "/payments/close_popup" for 127.0.0.1 at 2015-12-28 21:24:16 +0700
Processing by PaymentsController#close_popup as HTML
  Rendered payments/close_popup.html.haml within layouts/application (1.3ms)
Completed 200 OK in 34ms (Views: 31.6ms | ActiveRecord: 0.0ms)
  [1m[36mPayment Load (0.5ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` ASC LIMIT 1[0m
  [1m[35mPayment Load (0.7ms)[0m  SELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 21:25:36 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (1.8ms)
Completed 200 OK in 35ms (Views: 32.5ms | ActiveRecord: 0.0ms)


Started POST "/payments" for 127.0.0.1 at 2015-12-28 21:25:51 +0700
Processing by PaymentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Y+jBYeEgxhSBAXTizH/keL5Yciye129ndd4M36JXz9aqVFj7/UArxdzPJAUOLRoP7xeTx+UyrI+IuEhV+sYMhg==", "payment"=>{"quantity"=>"1"}, "commit.x"=>"111", "commit.y"=>"17", "commit"=>"Pay on Paypal"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (40.2ms)[0m  INSERT INTO `payments` (`quantity`, `created_at`, `updated_at`) VALUES (1, '2015-12-28 14:25:51', '2015-12-28 14:25:51')
  [1m[36m (53.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPayment Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-2BV62799YX135574K' AND `payments`.`id` != 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE `payments` SET `token` = 'EC-2BV62799YX135574K', `updated_at` = '2015-12-28 14:25:53' WHERE `payments`.`id` = 3
  [1m[36m (42.3ms)[0m  [1mCOMMIT[0m
Redirected to https://www.sandbox.paypal.com/incontext?token=EC-2BV62799YX135574K&useraction=commit
Completed 302 Found in 2234ms (ActiveRecord: 138.0ms)
  [1m[36mPayment Load (0.6ms)[0m  [1mSELECT  `payments`.* FROM `payments`  ORDER BY `payments`.`id` DESC LIMIT 1[0m


Started GET "/payments/cancel?token=EC-2BV62799YX135574K" for 127.0.0.1 at 2015-12-28 21:28:36 +0700
Processing by PaymentsController#cancel as HTML
  Parameters: {"token"=>"EC-2BV62799YX135574K"}
  [1m[35mPayment Load (0.6ms)[0m  SELECT  `payments`.* FROM `payments` WHERE `payments`.`token` = 'EC-2BV62799YX135574K' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPayment Exists (0.5ms)[0m  SELECT  1 AS one FROM `payments` WHERE (`payments`.`token` = BINARY 'EC-2BV62799YX135574K' AND `payments`.`id` != 3) LIMIT 1
  [1m[36mSQL (21.6ms)[0m  [1mUPDATE `payments` SET `canceled` = 1, `updated_at` = '2015-12-28 14:28:36' WHERE `payments`.`id` = 3[0m
  [1m[35m (35.7ms)[0m  COMMIT
Redirected to http://localhost:3000/payments/close_popup
Completed 302 Found in 70ms (ActiveRecord: 58.6ms)


Started GET "/payments/close_popup" for 127.0.0.1 at 2015-12-28 21:28:36 +0700
Processing by PaymentsController#close_popup as HTML
  Rendered payments/close_popup.html.haml within layouts/application (0.1ms)
Completed 200 OK in 36ms (Views: 32.5ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 21:59:54 +0700
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (2.6ms)
Completed 200 OK in 39ms (Views: 36.1ms | ActiveRecord: 0.0ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 22:09:39 +0700

LoadError - cannot load such file -- /home/asvenus/Project/Demo/demo/xxx/config/routes.rb:
  activesupport (4.2.1) lib/active_support/dependencies.rb:268:in `block in load'
  activesupport (4.2.1) lib/active_support/dependencies.rb:240:in `load_dependency'
  activesupport (4.2.1) lib/active_support/dependencies.rb:268:in `load'
  railties (4.2.1) lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  railties (4.2.1) lib/rails/application/routes_reloader.rb:40:in `load_paths'
  railties (4.2.1) lib/rails/application/routes_reloader.rb:16:in `reload!'
  railties (4.2.1) lib/rails/application/routes_reloader.rb:26:in `block in updater'
  activesupport (4.2.1) lib/active_support/file_update_checker.rb:75:in `execute'
  railties (4.2.1) lib/rails/application/routes_reloader.rb:7:in `execute'
  railties (4.2.1) lib/rails/application/finisher.rb:81:in `block (2 levels) in <module:Finisher>'
  activesupport (4.2.1) lib/active_support/callbacks.rb:446:in `block in make_lambda'
  activesupport (4.2.1) lib/active_support/callbacks.rb:192:in `block in simple'
  activesupport (4.2.1) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_prepare_callbacks'
  activesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:83:in `prepare!'
  actionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:71:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'
  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'



Started POST "/__better_errors/7e0a2dd84e9207fb/variables" for 127.0.0.1 at 2015-12-28 22:09:39 +0700


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 22:09:45 +0700

ActionController::RoutingError (No route matches [GET] "/payments/new"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (6.1ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.6ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (53.6ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (15.8ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.7ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (39.7ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 22:09:47 +0700

ActionController::RoutingError (No route matches [GET] "/payments/new"):
  actionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  web-console (2.2.1) lib/web_console/middleware.rb:39:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.1) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.1) lib/rails/engine.rb:518:in `call'
  railties (4.2.1) lib/rails/application.rb:164:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /home/asvenus/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.7ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (15.1ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_markup.html.erb (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/console.js.erb within layouts/javascript (13.3ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/main.js.erb within layouts/javascript (0.5ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.4ms)
  Rendered /home/asvenus/.rvm/gems/ruby-2.1.0/gems/web-console-2.2.1/lib/web_console/templates/index.html.erb (27.9ms)


Started GET "/payments/new" for 127.0.0.1 at 2015-12-28 22:10:38 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT `schema_migrations`.* FROM `schema_migrations`[0m
Processing by PaymentsController#new as HTML
  Rendered payments/new.html.haml within layouts/application (528.2ms)
Completed 200 OK in 1039ms (Views: 974.7ms | ActiveRecord: 11.0ms)
